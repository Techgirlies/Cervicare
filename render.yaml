services:
  - type: web
    name: assessment-microservice
    env: docker
    repo: https://github.com/Techgirlies/Cervicare
    branch: main
    dockerfilePath: ./cervicare-backend/DataSaverMicroservice/Dockerfile
    dockerContext: ./cervicare-backend/DataSaverMicroservice
    buildCommand: ./mvnw clean package -DskipTests
    plan: free
    region: oregon
    envVars:
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: cervicare-db
          property: connectionString
      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: cervicare-db
          property: user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: cervicare-db
          property: password

  - type: web
    name: appointment
    env: docker
    repo: https://github.com/Techgirlies/Cervicare
    branch: main
    dockerfilePath: ./cervicare-backend/appointment/Dockerfile
    dockerContext: ./cervicare-backend/appointment
    buildCommand: ./mvnw clean package -DskipTests
    plan: free
    region: oregon
    envVars:
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: cervicare-db
          property: connectionString
      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: cervicare-db
          property: user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: cervicare-db
          property: password

  - type: web
    name: cervicare-user-service
    env: docker
    repo: https://github.com/Techgirlies/Cervicare
    branch: main
    dockerfilePath: ./cervicare-backend/Cervicare_user_service/Dockerfile
    dockerContext: ./cervicare-backend/Cervicare_user_service
    buildCommand: ./mvnw clean package -DskipTests
    plan: free
    region: oregon
    envVars:
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: cervicare-db
          property: connectionString
      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: cervicare-db
          property: user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: cervicare-db
          property: password

  - type: web
    name: hospital-recommender-service
    env: docker
    repo: https://github.com/Techgirlies/Cervicare
    branch: main
    dockerfilePath: ./cervicare-backend/hospital-recommender-service/Dockerfile
    dockerContext: ./cervicare-backend/hospital-recommender-service
    buildCommand: ./mvnw clean package -DskipTests
    plan: free
    region: oregon
    envVars:
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: cervicare-db
          property: connectionString
      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: cervicare-db
          property: user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: cervicare-db
          property: password

  - type: web
    name: cervicare-frontend
    env: docker
    repo: https://github.com/Techgirlies/Cervicare
    branch: main
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: ./frontend
    plan: free
    region: oregon

databases:
  - name: cervicare-db
    databaseName: cervicare
    user: cervicare_user
    plan: free
    region: oregon
